/**
 * Created by YAO on 2018/9/12.
 */
!function(e,t){function n(t){var n={},r="";r="www.xin.com"===location.host?"ab.xin.com/hitlog.gif":"ab.test.xin.com/hitlog.gif",t.map(function(e){var t=e.split("=");t[1]&&(n[t[0]]=t[1])}),delete n.ua,delete n.from,delete n.rf_seo,delete n.rf_key,n.pid=e.__ab2__&&e.__ab2__.pid?e.__ab2__.pid:"";var o=e._abq._getParam("app_id");o||(o="u2_0"),n.app_id=o;var i={business:n,getUrl:r,postUrl:"",success:function(){},failed:function(){},appVersion:"xinapp",uid:"XIN_UID",cityIdForUrl:"_?",xdid:"xdid",appId:"app_id",net:"net",location:"location"};e.__ab2__&&e.__ab2__.sendAb2&&e.__ab2__.sendAb2(i,"get")}function r(){this._init()}r.prototype={constrcutor:r,UNKNOW:"unknow",_objStr:Object.prototype.toString,_isArray:function(e){return e&&"[object Array]"==this._objStr.call(e)?!0:!1},_beforeDomLoadedQueue:[],_debug:"",_isCollectPerfInfo:!1,_aburl:("https:"==t.location.protocol?"https://":"http://")+"ab.xin.com/collect.gif?",_abposturl:("https:"==t.location.protocol?"https://":"http://")+"ab.xin.com/post.gif?",_init:function(){var n=this,r=[],o=function(){for(;r.length>0;)n.push(r.splice(0,1))},i=function(t){o(t),e.performance&&!n._isCollectPerfInfo&&(n._isCollectPerfInfo=!0,setTimeout(function(){n._performance()},3e3))};if(n._isArray(e._abq))for(var a=e._abq.length,s=0;a>s;s++)r.push(e._abq[s]);t.addEventListener?(t.removeEventListener("DOMContentLoaded",o,!1),e.removeEventListener("load",i,!1),t.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",i,!1)):t.attachEvent&&(t.detachEvent("onreadystatechange",o),e.detachEvent("onload",i),t.attachEvent("onreadystatechange",o),e.attachEvent("onload",i))},deliver:function(){for(var n=this,r=e.deliverParams||[],o=[],i=n._jQuery(),a=0;a<r.length;a++)o.push(r[a]+"="+(n._getParam(r[a])||n._getParamValue(r[a])));i&&i(t).on("mousedown touchstart","a",function(){if("1"!=i(this).attr("deliver")){var e=this.href;if(e&&!/^(javascript\:|\#|tel\:)/.test(e)&&(!/^https?\:\/\//.test(e)||/xin\.com\//gi.test(e))){var t=e.split("?"),n=t[0].replace(/\#.*/g,""),r=(t.length>1?t[1]:"").split("#"),a=r[0],s=e.split("#")[1]||"";newObjSearch={},newArrSearch=[],a=a?a.split("&"):[];for(var c,u=0;u<a.length;u++)c=a[u].split("="),newObjSearch[c[0]]=c[1];for(var c,u=0;u<o.length;u++)c=o[u].split("="),newObjSearch[c[0]]=c[1];for(var p in newObjSearch)newArrSearch.push(p+"="+newObjSearch[p]);t=n+(newArrSearch.length>0?"?"+newArrSearch.join("&"):"")+(s?"#"+s:""),i(this).attr({href:t,deliver:1})}}})},_getParamValue:function(e){var t=this;switch(e){case"abtest":return t._getABtest();default:return""}},_bind:function(n,r,o,i){var a=function(t){t=t||e.event;for(var n,r=0;r<t.path.length;r++)if(n=t.path[r],(n.nodeName||n.tagName).toUpperCase()==i.toUpperCase()){o.call(n,t);break}};t.addEventListener?n.addEventListener(r,a,!1):t.attachEvent&&n.attachEvent(r,a)},_jQuery:function(){return e.jQuery?e.jQuery:e.Zepto?e.Zepto:void 0},_setCookie:function(e,n,r,o,i,a){t.cookie=[e,"=",n,";","domain","=",r,";","path","=",o,";","expires","=",i,";",a?"secure":"",";"].join("")},_getCookie:function(e){var n=new RegExp(e+"s*=s*([^;]+);*"),r=n.exec(t.cookie);return r&&r.length>1?r[1]:this.UNKNOW},_getGuid:function(){for(var e="",t=1;32>=t;t++){var n=Math.floor(16*Math.random()).toString(16);e+=n,(8==t||12==t||16==t||20==t)&&(e+="-")}return e},_getUniqueId:function(e){var t=this,e="XIN_UID_CK",n=t._getCookie(e);return n==t.UNKNOW&&(t._setCookie(e,t._getGuid(),"xin.com","/",new Date("2037/12/31 23:59:59").toUTCString()),n=t._getCookie(e)),n},_getABtest:function(e){var t=this,n="",r=t._getUniqueId(),o=parseInt(r.split("-")[0],16);return e=e||.3,n=e>=o/1e4%1?"B":"A"},_getEvent:function(e){var t="/";return t+e.slice(1).join(t)},_getFrom:function(){var t=e.navigator.userAgent,t=t.toUpperCase(),n=/XINAPP*[\/,=]*/i.test(t),r=/android/gi.test(t),o=/iphone/gi.test(t),i=/(iPad).*OS\s([\d_]+)/gi.test(t),a="",s=t.match(/XINAPP\[(\w+)\]/i);return n?s&&s[1]?a=s[1]:r?a="m-android":(o||i)&&(a="m-ios"):a=r||o||i?"m":"www",a},_getAppVersion:function(){var t=e.navigator.userAgent;t=t.toUpperCase();var n=/XINAPP*[\/,=]\s*([^\s]+)/.exec(t);return n&&n.length>1?n[1]:""},_getUserId:function(){var e=this,t=e._getCookie("XIN_UID");return t!=e.UNKNOW?t:""},_getCityId:function(){var e=this,t=e._getCookie("XIN_LOCATION_CITY");return t!=e.UNKNOW?JSON.parse(decodeURIComponent(t)).cityid:""},_getSource:function(e){var t=/.?:\/\/([^\/]+)\/.*/.exec(e);return t&&t.length>1?t[1]:""},_getToken:function(){var t=this._getParam("optoken"),n=e.__json4fe__;return t?t:n&&n.optoken?n.optoken:""},_getChannel:function(){var t=/channel\s*=\s*([^&]+)&?/.exec(decodeURIComponent(e.location.search));return t&&t.length>1?encodeURIComponent(t[1]):""},_getSeoRef:function(e){var t=this,n="SEO_REF",r=t._getCookie(n),o="";if(t._getParam("channel"))return o;t._getParam("referer")&&(e=t._getParam("referer"));var i=new RegExp("[?&]referer=([^&]+)","g"),a=i.exec(e);if(null!=a)try{e=decodeURIComponent(decodeURIComponent(a[1]))}catch(s){try{e=decodeURIComponent(a[1])}catch(s){e=a[1]}}if(r==t.UNKNOW&&""!=e||t._checkDomain(t._getSource(e))&&t._getSource(e)!=t._getSource(r)&&""!=e){var c=new Date;c.setTime(c.getTime()+864e5),t._setCookie(n,e,"xin.com","/",c.toUTCString()),r=t._getCookie(n)}if(t._checkDomain(t._getSource(r))&&""!=e){var u=t._getSource(r);u=u.split("."),o="seo_"+u[1]}return o},_getSeoKey:function(e){var t=this,n="SEO_KEY",r=t._getCookie(n),o="";t._getParam("referer")&&(e=t._getParam("referer"));var i=new RegExp("[?&]referer=([^&]+)","g"),a=i.exec(e);if(null!=a)try{e=decodeURIComponent(decodeURIComponent(a[1]))}catch(s){try{e=decodeURIComponent(a[1])}catch(s){e=a[1]}}for(var c=["word","wd","q","keyword","query"],u=0;u<c.length;u++){var i=new RegExp("[?&]"+c[u]+"=([^&]+)","g"),a=i.exec(e);if(null!=a)try{o=decodeURIComponent(decodeURIComponent(a[1]))}catch(s){try{o=decodeURIComponent(a[1])}catch(s){o=a[1]}}}if(r==t.UNKNOW&&""!=o||r!=t.UNKNOW&&""!=o){var p=new Date;p.setTime(p.getTime()+864e5),t._setCookie(n,o,"xin.com","/",p.toUTCString()),o=t._getCookie(n)}return r!=t.UNKNOW&&""==o&&(o=r),o},_checkDomain:function(e){for(var t=["www.xin.com","che.xin.com","m.xin.com","che.m.xin.com"],n=0;n<t.length;n++)if(t[n]==e)return!1;return!0},_getParam:function(e){var n=t.location.search,r=new RegExp("[?&]"+e+"=([^&]+)","g"),o=r.exec(n),i=null;if(null!=o)try{i=decodeURIComponent(decodeURIComponent(o[1]))}catch(a){try{i=decodeURIComponent(o[1])}catch(a){i=o[1]}}return i},_isEnabledCookie:function(){return e.navigator.cookieEnabled?"1":"0"},_isSupportLocalStorage:function(){return e.localStorage?"1":"0"},_getLanguage:function(){return e.navigator.language||e.navigator.browserLanguage||e.navigator.systemLanguage||e.navigator.userLanguage||""},_getColorDepth:function(){return e.screen.colorDepth||0},_getBaseParams:function(){var t=this,n=[];n.push("cid="+t._getUniqueId()),n.push("from="+t._getFrom()),n.push("app="+t._getAppVersion()),n.push("net="),n.push("ua="+e.navigator.userAgent),n.push("sc="+e.screen.width+"*"+e.screen.height),n.push("ts="+(new Date).getTime()),void 0!=e.pageid&&n.push("pageid="+e.pageid);var r=t._getParam("abversion");return n.push("abversion="+(r||"")),n.push("keywordid="+(t._getParam("keywordid")||"")),n.push("creative="+(t._getParam("creative")||"")),n.push("mediaid="+(t._getParam("mediaid")||"")),t._getToken()?n.push("optoken="+t._getToken()):null,n},_getTrackParams:function(e){var n=this,r=[];return r.push("type=c"),r.push("ev="+encodeURIComponent(n._getEvent(e))),r.push("uid="+n._getUserId()),r.push("cityid="+n._getCityId()),r.push("url="+encodeURIComponent(t.location.href)),r.push("ref="+encodeURIComponent(t.referrer)),r.push("source="+n._getSource(t.referrer)),r.push("channel="+n._getChannel()),r.push("rf_seo="+n._getClickSeoRef()),r.push("rf_key="+encodeURIComponent(n._getClickSeoKey())),r=r.concat(n._getBaseParams())},_getClickSeoRef:function(){var e,t=this,n="";if(e=t._getCookie("SEO_REF"),e!=t.UNKNOW&&t._checkDomain(t._getSource(e))){var r=t._getSource(e);r=r.split("."),n="seo_"+r[1]}return n},_getClickSeoKey:function(){var e,t=this,n="";return e=t._getCookie("SEO_KEY"),e!=t.UNKNOW&&(n=e),n},_getPageviewParams:function(){var e=this,n=[];return n.push("type=w"),n.push("uid="+e._getUserId()),n.push("cityid="+e._getCityId()),n.push("url="+encodeURIComponent(t.location.href)),n.push("ref="+encodeURIComponent(t.referrer)),n.push("source="+e._getSource(t.referrer)),n.push("channel="+e._getChannel()),n.push("rf_seo="+e._getSeoRef(t.referrer)),n.push("rf_key="+encodeURIComponent(e._getSeoKey(t.referrer))),n=n.concat(e._getBaseParams())},_getLoadviewParams:function(n){var r=this,o=[];if(o.push("type=e"),o.push("uid="+r._getUserId()),o.push("cityid="+r._getCityId()),o.push("url="+encodeURIComponent(t.location.href)),o.push("ref="+encodeURIComponent(t.referrer)),o.push("source="+r._getSource(t.referrer)),o.push("channel="+r._getChannel()),o.push("rf_seo="+r._getSeoRef(t.referrer)),o.push("rf_key="+encodeURIComponent(r._getSeoKey(t.referrer))),o=o.concat(r._getBaseParams()),void 0!=e.biAddAttributes){o.push("pl="+e.biAddAttributes.pl);var i="";for(key in e.biAddAttributes.ds)i+=key+"#"+e.biAddAttributes.ds[key]+",";i=i.substring(0,i.length-1),o.push("ds="+encodeURIComponent(i))}return(void 0!=n||""!=n||null!=n)&&void 0!=n.pl&&void 0!=n.ds&&(o.push("pl="+encodeURIComponent(n.pl)),o.push("ds="+encodeURIComponent(n.ds))),o},_getPerformanceParams:function(){var n=this,r=[];if(r.push("type=p"),r.push("ce="+n._isEnabledCookie()),r.push("ls="+n._isSupportLocalStorage()),r.push("lg="+n._getLanguage()),r.push("cd="+n._getColorDepth()),r.push("pid="+n._getPageId()),e.performance){var o=e.performance;if(o.navigation&&(r.push("nt="+o.navigation.type),r.push("nr="+o.navigation.redirectCount)),o.timing){r.push("pce="+o.timing.connectEnd),r.push("pcs="+o.timing.connectStart),r.push("pdc="+o.timing.domComplete),r.push("pdclee="+o.timing.domContentLoadedEventEnd),r.push("pdcles="+o.timing.domContentLoadedEventStart),r.push("pdi="+o.timing.domInteractive),r.push("pdl="+o.timing.domLoading),r.push("pdle="+o.timing.domainLookupEnd),r.push("pdls="+o.timing.domainLookupStart),r.push("pfs="+o.timing.fetchStart),r.push("plee="+o.timing.loadEventEnd),r.push("ples="+o.timing.loadEventStart),r.push("pns="+o.timing.navigationStart),r.push("pre="+o.timing.redirectEnd),r.push("prs="+o.timing.redirectStart),r.push("preqs="+o.timing.requestStart),r.push("prese="+o.timing.responseEnd),r.push("press="+o.timing.responseStart),r.push("pscs="+o.timing.secureConnectionStart),r.push("puee="+o.timing.unloadEventEnd),r.push("pues="+o.timing.unloadEventStart);{var i=o.timing.fetchStart-o.timing.navigationStart,a=o.timing.redirectEnd-o.timing.redirectStart,s=o.timing.domainLookupStart-o.timing.fetchStart,c=(o.timing.unloadEventEnd-o.timing.unloadEventStart,o.timing.domainLookupEnd-o.timing.domainLookupStart),u=o.timing.connectEnd-o.timing.connectStart,p=o.timing.responseEnd-o.timing.fetchStart,d=(o.timing.domInteractive-o.timing.responseEnd,o.timing.domContentLoadedEventEnd-o.timing.responseEnd),h=o.timing.domComplete-o.timing.fetchStart;o.timing.domContentLoadedEventEnd-o.timing.omContentLoadedEventStart}if(r.push("ready="+i),r.push("redirect="+a),r.push("cache="+s),r.push("unload="+a),r.push("dns="+c),r.push("tcp="+u),r.push("request="+p),r.push("dom="+d),r.push("load="+h),e.__json4fe__&&e.__json4fe__.performance&&e.__json4fe__.performance.whiteScreen){var g=e.__json4fe__.performance.whiteScreen-o.timing.navigationStart;r.push("white="+g)}r.push("hostname="+location.hostname),r.push("uri="+location.pathname),r.push("title="+t.title);var _=t.referrer;_&&-1!=_.indexOf("?")&&(_=_.replace(/=/g,":")),r.push("refer="+_),r.push("url="+e.location.href.split("?")[0]);var m=location.search;m&&-1!=m.indexOf("?")&&(m=m.slice(1).split("/").toString().replace(/=/g,":")),r.push("params="+m)}o.memory&&(r.push("pjshsl="+o.memory.jsHeapSizeLimit),r.push("ptjshs="+o.memory.totalJSHeapSize),r.push("pujshs="+o.memory.usedJSHeapSize))}return r=r.concat(n._getBaseParams())},_getEntriesParams:function(){var t=this,n=[];if(e.performance&&e.performance.getEntries)for(var r=e.performance.getEntries(),o=0;o<r.length;o++)n.push(t._getEntrie(r[o]));return n.join(";")},_getEntrie:function(e){var t=this,n=t._toFixed,r=[];return e.connectEnd&&r.push("ece:"+n(e.connectEnd)),e.connectStart&&r.push("ecs:"+n(e.connectStart)),e.decodedBodySize&&r.push("edbs:"+n(e.decodedBodySize)),e.domainLookupEnd&&r.push("edle:"+n(e.domainLookupEnd)),e.domainLookupStart&&r.push("edls:"+n(e.domainLookupStart)),e.duration&&r.push("ed:"+n(e.duration)),e.encodedBodySize&&r.push("eebs:"+n(e.encodedBodySize)),e.entryType&&r.push("eet:"+e.entryType),e.fetchStart&&r.push("efs:"+n(e.fetchStart)),e.initiatorType&&r.push("eit:"+e.initiatorType),e.name&&r.push("en:"+e.name.replace(/^http(s?)\:\/\/([sc][1-6]?)\.xinstatic\.com\//i,"$1!$2//")),e.redirectEnd&&r.push("erde:"+n(e.redirectEnd)),e.redirectStart&&r.push("erds:"+n(e.redirectStart)),e.requestStart&&r.push("erqs:"+n(e.requestStart)),e.responseEnd&&r.push("erpe:"+n(e.responseEnd)),e.responseStart&&r.push("erps:"+n(e.responseStart)),e.secureConnectionStart&&r.push("escs:"+n(e.secureConnectionStart)),e.startTime&&r.push("est:"+n(e.startTime)),e.transferSize&&r.push("ets:"+n(e.transferSize)),e.workerStart&&r.push("ews:"+n(e.workerStart)),r.join(",")},_toFixed:function(e){return e.toFixed(3)},_getCollectUrl:function(e){var t=this;return(t._debugurl?t._debugurl:t._aburl)+e.join("&")},_collect:function(e){var r=new Image;r.style.display="none",r.src=this._getCollectUrl(e),t.body.appendChild(r),n(e)},_collectPost:function(e){var t=this,n=new XMLHttpRequest;n.open("POST",t._debugurl?t._debugurl:t._abposturl),n.send(e.join("&"))},_debug:function(e){e.length<2||(this._debugurl=e[1])},_track:function(e){var t=this;t._collect(t._getTrackParams(e))},_pageview:function(e){var n=this;t.getElementById("ad_home_adver_top")&&n._collect(n._getLoadviewParams(e)),n._collect(n._getPageviewParams(e))},_performance:function(e){this._collect(this._getPerformanceParams(e))},push:function(e){var t=this;if(t._isArray(e)){if(t._isArray(e[0])){for(var n=0;n<e.length;n++)t.push(e[n]);return!1}var r=t[e[0]];r&&r.call(t,e)}},_eventReq:function(e){var t=this;t._collect(t._getLoadviewParams(e[1]))},_getPageId:function(){return e.PAGE_ID||e.location.href.split("?")[0]}},e._abq=new r}(window,document);